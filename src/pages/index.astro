---
import PageLayout from "@/layouts/Base";
import PostPreview from "@/components/blog/PostPreview";
import SocialList from "@/components/SocialList";
import { getAllBlogs, sortMDByDate } from "@/utils";

const MAX_POSTS = 10;
const allPosts = await getAllBlogs();
const allPostsByDate = sortMDByDate(allPosts).slice(0, MAX_POSTS);

const techStack: Array<{ title: string; desc: string; href: string }> = [
	{
		title: "Astro",
		desc: "Build fast websites, faster.",
		href: "https://astro.build",
	},
	{
		title: "Astro Assets",
		desc: "Built-in optimized asset support.",
		href: "https://docs.astro.build/en/guides/assets/",
	},
	{
		title: "Astro Icon",
		desc: "An easy to use Icon component for Astro.",
		href: "https://github.com/natemoo-re/astro-icon#readme",
	},
	{
		title: "Markdown",
		desc: "Simple and easy-to-use markup language.",
		href: "https://www.markdownguide.org/",
	},
	{
		title: "MDX",
		desc: "Markdown for the component era.",
		href: "https://mdxjs.com/",
	},
	{
		title: "MonoLisa",
		desc: "A professional programming font with cool ligatures.",
		href: "https://monolisa.dev/",
	},
	{
		title: "Pagefind",
		desc: "A fully static search library.",
		href: "https://pagefind.app/",
	},
	{
		title: "Satori",
		desc: "Generating png Open Graph images for blog posts.",
		href: "https://github.com/vercel/satori",
	},
	{
		title: "Tailwind CSS",
		desc: "Rapidly build modern websites without ever leaving your HTML.",
		href: "https://tailwindcss.com",
	},
];
---

<PageLayout meta={{ title: "Home" }}>
	<section>
		<h1 class="group title mb-6" id="greeting">
			<span class="group-hover:animate-wobble inline-block">ğŸ‘‹</span>
			<span id="greeting-text">Hello, World!</span>
		</h1>
		<p class="mb-4">
			Hey there, iâ€™m Christopher, a recovering frontend web developer living in New York City by way
			of Oakland, San Francisco, and Houston. i moved here in June of 2023 with my spouse Chris and
			our two cats, Dante and Tybalt. iâ€™ve spent the last year or so working on healing in response
			to suffering burnout in late 2022, so instead of building another portfolio site, i decided to
			build myself a personal one, instead.
		</p>
		<SocialList />
	</section>
	<section aria-label="Blog post list" class="mt-16">
		<h2 class="title mb-4 text-xl">Posts</h2>
		<ul class="space-y-4 sm:space-y-2">
			{
				allPostsByDate.map((p) => (
					<li class="flex flex-col gap-x-2 sm:flex-row">
						<PostPreview post={p} />
					</li>
				))
			}
		</ul>
	</section>
	<section class="mt-16">
		<h2 class="title mb-4 text-xl">Technologies</h2>
		<ul class="space-y-4 sm:space-y-2">
			{
				techStack.map(({ href, title, desc }) => (
					<li>
						<a
							href={href}
							target="_blank"
							rel="noopener noreferrer"
							class="cactus-link inline-block"
						>
							{title}
						</a>
						:<p class="inline-block sm:mt-2">{desc}</p>
					</li>
				))
			}
		</ul>
	</section>
	<script>
		export const greetings: { language: string; text: string; langcode: string; dir: string }[] = [
			{ language: "Afrikaans", text: "Hello WÃªreld!", langcode: "af", dir: "ltr" },
			{ language: "Albanian", text: "PÃ«rshendetje BotÃ«!", langcode: "sq", dir: "ltr" },
			{ language: "Arabic", text: "Ù…Ø±Ø­Ø¨Ø§ Ø¨Ø§Ù„Ø¹Ø§Ù„Ù…!", langcode: "ar", dir: "rtl" },
			{ language: "Armenian", text: "Ô²Õ¡Ö€Õ¥Ö‚ Õ¡Õ·Õ­Õ¡Ö€Õ°!", langcode: "hy", dir: "ltr" },
			{ language: "Azerbaijani", text: "Salam DÃ¼nya", langcode: "az", dir: "ltr" },
			{ language: "Basque/Euskara", text: "Kaixo Mundua!", langcode: "eu", dir: "ltr" },
			{ language: "Belarusian", text: "ĞŸÑ€Ñ‹Ğ²Ñ–Ñ‚Ğ°Ğ½Ğ½Ğµ Ğ¡ÑƒÑĞ²ĞµÑ‚!", langcode: "be", dir: "ltr" },
			{ language: "Bengali", text: "à¦¹à§à¦¯à¦¾à¦²à§‹, à¦¬à¦¿à¦¶à§à¦¬!", langcode: "bn", dir: "ltr" },
			{ language: "Bulgarian", text: "Ğ—Ğ´Ñ€Ğ°Ğ²ĞµĞ¹ ÑĞ²ÑÑ‚!", langcode: "bg", dir: "ltr" },
			{ language: "Czech", text: "Ahoj svÄ›te!", langcode: "cs", dir: "ltr" },
			{ language: "Khmer", text: "áŸá½áŸáŸ’áá¸â€‹á–á·á—á–á›áŸ„á€!", langcode: "km", dir: "ltr" },
			{ language: "Catalan", text: "Hola mÃ³n!", langcode: "ca", dir: "ltr" },
			{ language: "Chinese", text: "ä½ å¥½ä¸–ç•Œï¼", langcode: "zh", dir: "ltr" },
			{ language: "Croatian", text: "Pozdrav svijete!", langcode: "hr", dir: "ltr" },
			{ language: "Danish", text: "Hej, Verden!", langcode: "da", dir: "ltr" },
			{ language: "Dutch", text: "Hallo, wereld!", langcode: "nl", dir: "ltr" },
			{ language: "English", text: "Hello World!", langcode: "en", dir: "ltr" },
			{ language: "Esperanto", text: "Saluton mondo!", langcode: "eo", dir: "ltr" },
			{ language: "Estonian", text: "Tere, Maailm!", langcode: "et", dir: "ltr" },
			{ language: "Finnish", text: "Hei maailma!", langcode: "fi", dir: "ltr" },
			{ language: "French", text: "Salut le Monde!", langcode: "fr", dir: "ltr" },
			{ language: "Frisian", text: "Hallo, wrÃ¢ld!", langcode: "fy", dir: "ltr" },
			{ language: "Galician", text: "Ola mundo!", langcode: "gl", dir: "ltr" },
			{ language: "German", text: "Hallo Welt!", langcode: "de", dir: "ltr" },
			{ language: "Greek", text: "Î“ÎµÎ¹Î±, ÎšÏŒÏƒÎ¼Î¿Ï‚!", langcode: "el", dir: "ltr" },
			{ language: "Hawaiian", text: "Aloha Honua", langcode: "haw", dir: "ltr" },
			{ language: "Hebrew", text: "×©×œ×•×, ×¢×•×œ×!", langcode: "he", dir: "rtl" },
			{ language: "Hindi", text: "à¤¨à¤®à¤¸à¥à¤•à¤¾à¤°, à¤µà¤¿à¤¶à¥à¤µ!", langcode: "hi", dir: "ltr" },
			{ language: "Hmong", text: "Nyob zoo ntiaj teb.", langcode: "hmn", dir: "ltr" },
			{ language: "Hungarian", text: "HellÃ³ vilÃ¡g!", langcode: "hu", dir: "ltr" },
			{ language: "Icelandic", text: "HallÃ³ heimur!", langcode: "is", dir: "ltr" },
			{ language: "Igbo", text: "Ndewo á»¤wa", langcode: "ig", dir: "ltr" },
			{ language: "Indonesian", text: "Halo Dunia!", langcode: "id", dir: "ltr" },
			{ language: "Irish", text: "Dia dhaoibh, a dhomhain!", langcode: "ga", dir: "ltr" },
			{ language: "Italian", text: "Ciao Mondo!", langcode: "it", dir: "ltr" },
			{ language: "Japanese", text: "ã“ã‚“ã«ã¡ã¯ã€ä¸–ç•Œï¼", langcode: "ja", dir: "ltr" },
			{ language: "Kannada", text: "à²¹à²²à³‹, à²µà²°à³à²²à³à²¡à³!", langcode: "kn", dir: "ltr" },
			{ language: "Kiswahili", text: "Habari dunia!", langcode: "sw", dir: "ltr" },
			{ language: "Kikuyu", text: "Niatia thi!", langcode: "ki", dir: "ltr" },
			{ language: "Korean", text: "ì•ˆë…•í•˜ì„¸ìš”, ì›”ë“œ!", langcode: "ko", dir: "ltr" },
			{ language: "Lao", text: "àºªàº°â€‹àºšàº²àºâ€‹àº”àºµâ€‹àºŠàº²àº§â€‹à»‚àº¥àº!", langcode: "lo", dir: "ltr" },
			{ language: "Latin", text: "Salve, Mundus!", langcode: "la", dir: "ltr" },
			{ language: "Latvian", text: "Sveika, Pasaule!", langcode: "lv", dir: "ltr" },
			{ language: "Lithuanian", text: "Sveikas, Pasauli", langcode: "lt", dir: "ltr" },
			{ language: "Luxembourgish", text: "Moien Welt!", langcode: "lb", dir: "ltr" },
			{ language: "Malagasy", text: "Manao ahoana ry tany!", langcode: "mg", dir: "ltr" },
			{ language: "Malayalam", text: "Namaskaram, lokame", langcode: "ml", dir: "ltr" },
			{ language: "Maltese", text: "Merhba lid-dinja", langcode: "mt", dir: "ltr" },
			{ language: "Norwegian", text: "Hallo verden!", langcode: "no", dir: "ltr" },
			{ language: "Persian", text: "Ø³Ù„Ø§Ù… Ø¯Ù†ÛŒØ§!", langcode: "fa", dir: "rtl" },
			{ language: "Polish", text: "Witaj Å›wiecie!", langcode: "pl", dir: "ltr" },
			{ language: "Portuguese", text: "OlÃ¡, mundo!", langcode: "pt", dir: "ltr" },
			{ language: "Punjabi", text: "à¨¸à¨¤à¨¿ à¨¸à©à¨°à©€ à¨…à¨•à¨¾à¨² à¨¦à©à¨¨à¨¿à¨†!", langcode: "pa", dir: "ltr" },
			{ language: "Romanian", text: "Salut lume!", langcode: "ro", dir: "ltr" },
			{ language: "Russian", text: "ĞŸÑ€Ğ¸Ğ²ĞµÑ‚, Ğ¼Ğ¸Ñ€!", langcode: "ru", dir: "ltr" },
			{ language: "Scots Gaelic", text: "HalÃ², a Shaoghail!", langcode: "gd", dir: "ltr" },
			{ language: "Serbian", text: "Zdravo Svete!", langcode: "sr", dir: "ltr" },
			{ language: "Slovak", text: "Ahoj, svet!", langcode: "sk", dir: "ltr" },
			{ language: "Slovenian", text: "Pozdravljen svet!", langcode: "sl", dir: "ltr" },
			{ language: "Spanish", text: "Â¡Hola mundo!", langcode: "es", dir: "ltr" },
			{ language: "Swedish", text: "HallÃ¥ vÃ¤rlden!", langcode: "sv", dir: "ltr" },
			{ language: "Tagalog", text: "Kumusta, Mundo!", langcode: "tl", dir: "ltr" },
			{ language: "Tamil", text: "à®µà®£à®•à¯à®•à®®à¯, à®‰à®²à®•à®®à¯!", langcode: "ta", dir: "ltr" },
			{ language: "Telugu", text: "à°¹à°²à±‹, à°ªà±à°°à°ªà°‚à°šà°‚!", langcode: "te", dir: "ltr" },
			{ language: "Thai", text: "à¸ªà¸§à¸±à¸ªà¸”à¸µà¹‚à¸¥à¸!", langcode: "th", dir: "ltr" },
			{ language: "Turkish", text: "Merhaba DÃ¼nya!", langcode: "tr", dir: "ltr" },
			{ language: "Ukrainian", text: "ĞŸÑ€Ğ¸Ğ²Ñ–Ñ‚, Ğ¡Ğ²Ñ–Ñ‚Ğµ!", langcode: "uk", dir: "ltr" },
			{ language: "Urdu", text: "ÛÛŒÙ„Ùˆ Ø¯Ù†ÛŒØ§ ÙˆØ§Ù„Ùˆ", langcode: "ur", dir: "rtl" },
			{ language: "Vietnamese", text: "Xin chÃ o tháº¿ giá»›i", langcode: "vi", dir: "ltr" },
			{ language: "Welsh", text: "Sâ€™mae byd!", langcode: "cy", dir: "ltr" },
			{ language: "Yiddish", text: "×”×¢×œ× ×•×•×¢×œ×˜!", langcode: "yi", dir: "rtl" },
			{ language: "Zulu", text: "Sawubona Mhlaba", langcode: "zu", dir: "ltr" },
		];

		function randomGreeting() {
			// Randomly select a â€œHello, World!â€ from the array
			const randHello = greetings[Math.floor(Math.random() * greetings.length)];

			// Get the greeting element
			const hello = document.getElementById("greeting-text");

			// If the element exists, update the text
			if (hello) {
				// Set the innerHTML of the <h1> tag to the text of the random greeting, and the lang attribute to the langcode of the random greeting
				hello.setAttribute("lang", (randHello as { langcode: string }).langcode);
				hello.setAttribute("dir", (randHello as { dir: string }).dir);
				hello.innerHTML = (
					randHello as { language: string; text: string; langcode: string; dir: string }
				).text;
			}
		}

		document.addEventListener("astro:page-load", () => {
			randomGreeting();
		});

		document.addEventListener("astro:after-swap", () => {
			randomGreeting();
		});
	</script>
</PageLayout>
